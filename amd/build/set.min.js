define(["jquery","theme_bootstrapbase/bootstrap","block_homework/jquery.sumoselect","block_homework/bootstrap-switch","block_homework/zebra_tooltips","block_homework/select2","block_homework/form_validate"],function(a,b,c,d,e,f,g){"use strict";var h=function(){var b=M.str.block_homework;this.start=function(){if(0!==a("#ond_form").length){if(a("#btncancel").on("click",c),a("#btnsubmit").click(function(){g.validateInputs(e)}),a("#selectcourse").length>0)return a("#btnsubmit").html("Next"),void a("#selectcourse").attr("style","width:30%").select2();a("#activity").on("change",d),a(".ond_subgroupcontroller").change(function(){var b=a(this),c=a("#"+b.attr("id")+"_subgroup_on"),d=a("#"+b.attr("id")+"_subgroup_off");b.prop("checked")||0===b[0].selectedIndex?(c.fadeIn(),d.fadeOut()):(c.fadeOut(),d.fadeIn())}).change(),a.fn.bootstrapSwitch&&a("input[type=checkbox][data-toggle=toggle]").bootstrapSwitch({handleWidth:40,labelWidth:1,onText:b.on,offText:b.off}),a("#groups").attr("multiple")&&a("#groups").SumoSelect({csvDispCount:5,placeholder:b.sethomeworkforall,selectAll:!0}),new a.Zebra_Tooltips(a(".tooltips"),{background_color:"oldlace",color:"black",opacity:"1"}),d()}};var c=function(){var b=M.cfg.wwwroot,c=a("#course").val();"undefined"!=typeof c&&(b+="/course/view.php?id="+c),window.location=b},d=function(){var c=a("#activity").val(),d="",e="",f=0;if("0"!==c){var g="c"==c.slice(1);c=c.slice(c.indexOf(".")+1),console.log(c),d=ondEduLinkActivities[c].name,g&&(d=b.copyof_+d);var h=ondEduLinkActivities[c].availability,i=!0,j=[];if(null!=h)for(var k=0;k<h.c.length;k++){if("group"!=h.c[k].type){i=!1;break}j.push(h.c[k].id)}i&&"hidden"!=a("#groups").attr("type")&&(a("#groups").val(j),a("#groups")[0].sumo.reload()),e=ondEduLinkActivities[c].description,f=ondEduLinkActivities[c].grade}else if("undefined"!=typeof ondEduLinkDefaultGroup&&"hidden"!=a("#groups").attr("type")){var j=[ondEduLinkDefaultGroup];a("#groups").val(j),a("#groups")[0].sumo.reload()}a("#name").val(d),a("#description").val(e),a("#gradingscale").val(f)},e=function(b){var c=M.str.block_homework,d="";return"due"==b.attr("id")&&b.val()<=a("#available").val()&&(d=c.duedateinvalid),d}};return new h});